# Prometheus Configuration for Kong LLM Gateway
#
# Local development configuration
# Alerting is handled by Datadog (not AlertManager)

global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    environment: local
    project: kong-llm-gateway

# Remote write to Datadog (optional - enable if using Datadog metrics)
# Requires DD_API_KEY environment variable
# remote_write:
#   - url: "https://prometheus-intake.datadoghq.com/api/v1/push"
#     bearer_token: "${DD_API_KEY}"
#     write_relabel_configs:
#       - source_labels: [__name__]
#         regex: "kong_.*"
#         action: keep

# Scrape configurations
scrape_configs:
  # Prometheus self-monitoring
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']
        labels:
          service: prometheus

  # Kong metrics (requires prometheus plugin enabled)
  - job_name: 'kong'
    static_configs:
      - targets: ['kong:8001']
        labels:
          service: kong
    metrics_path: /metrics
    scrape_interval: 10s

  # Mock Bedrock health
  - job_name: 'mock-bedrock'
    static_configs:
      - targets: ['mock-bedrock:8080']
        labels:
          service: mock-bedrock
    metrics_path: /health
    scrape_interval: 30s
